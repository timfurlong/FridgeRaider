<!DOCTYPE html>
<html lang="en">
  <head>
   {% load static %}
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="description" content="Recipes with only what you already have.">
   <meta name="author" content="Tim Furlong">
   <link rel="shortcut icon" href="{% static 'assets/FridgeRaiderIcon.ico' %}">

   <title>FridgeRaider | Recipe Search</title>

   <!-- Bootstrap core CSS -->
   <link href="{% static 'bootstrap/bootstrap.min.css'%}" rel="stylesheet">

   <!-- Custom styles for this template -->
   <link href="{% static 'css/search.css' %}" rel="stylesheet">

   <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
     <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
   <![endif]-->
  </head>

  <body>

   {% include "navbar.html" %}

   <div class="container">

      <div class="starter-template">
         <form action="" id='ingredientsForm'>
            <div class="input-group">
               <span class="input-group-addon">Ingredients:</span>
               {% if q %}
                  <input type="text" name="q" id="IngredientsInput" class="form-control" placeholder="For example: onions, bok choy, coconut milk" value="{{ q }}">
               {% else %}
                  <input type="text" name="q" id="IngredientsInput" class="form-control" placeholder="For example: onions, bok choy, coconut milk">
               {% endif %}
            </div>
         </form>

         {% if q %}
            {% if matches %}
               {% if infoMsg %}
                  <div class="alert alert-info">
                     <p>{{ infoMsg }}</p>
                  </div>
               {% endif %}

               <div class="row row-padded">
               {%for r in matches %}
                  <div class="col-md-3 recipeDescriptionBox">
                     <a href="{{ r.getYummlyUrl }}" target="_blank">
                        <img src="{{ r.imageUrl }}" class="img-rounded">
                     </a>
                     <h3 class="recipeTitle">{{ r.title }}</h3>
                     <p class="text-muted">{{ r.getIngredientsStr|truncatechars:110 }}</p>
                  </div>
                  {% if forloop.counter|divisibleby:"4" %}
                     </div>
                     <div class="row row-padded">
                  {% endif %}
               {% endfor %}
                     </div> {# close the last recipeDescription box #}

               <ul class="pager">
                  {% if matches.has_previous %}
                     <li><a href="?page={{ matches.previous_page_number }}&q={{ q }}">Previous</a></li>
                  {% endif %}

                  <span id="currentPage">
                     Page {{ matches.number }} of {{ matches.paginator.num_pages }}
                  </span>

                  {% if matches.has_next %}
                     <li><a href="?page={{ matches.next_page_number }}&q={{ q }}">Next</a></li>
                  {% endif %}
               </ul>

               <div id="footer">
                  <div class="col-md-6">
                     <p class="text-muted text-left">
                        Recipe search powered by <a href='http://www.yummly.com/recipes'><img alt='Yummly' src='http://static.yummly.com/api-logo.png'/></a>
                     </p>
                  </div>
                  <div class="col-md-6">
                     <p class="text-muted text-right">Created by Tim Furlong</p>
                  </div>
               </div>

            {% else %}
               <div class="row row-padded">
                  <div class="alert alert-danger">
                     <p>No recipes found for "{{ q }}". Please try again.</p>
                  </div>
               </div>
            {% endif %}
         {% endif %}
      </div>

   </div>{# end .container #}
</body>
</html>